# Make sure you have already installed "protoc" and "mypy_protobuf":
# https://grpc.io/docs/languages/python/basics/
# https://github.com/dropbox/mypy-protobuf

# On my machine, mypy_protobuf is installed to `flower/env/lib/python3.8/site-packages/mypy_protobuf`
# where env is my Python venv. 

# generate transport_pb2.py, transport_pb2_grpc.py, transport_pb2.pyi
chmod 777 ../../mypy_protobuf.py
python -m grpc_tools.protoc --plugin=protoc-gen-mypy=../../mypy_protobuf.py -I=. --python_out=. --grpc_python_out=. --mypy_out=. transport.proto

# Remember to change the import
echo "Remeber to change the improt statement in transport_pb2_grpc.py to be: "
echo "from flwr.proto import transport_pb2 as transport__pb2"