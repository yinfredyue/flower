from .strategy import SPStrategy

import numpy as np

class AccuracyVariance(SPStrategy):

    def __init__(self, last_k_data: int, var_threshold: float):
        super(AccuracyVariance, self).__init__()
        self.k = last_k_data
        self.var_thres = variance_threshold

    def should_switch(self) -> bool:
        data = self.data[-k:]
        return np.var(data) < self.var_thres
